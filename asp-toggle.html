<link rel="import" href="/bower_components/polymer/polymer-element.html">

<link rel="import" href="/bower_components/iron-icon/iron-icon.html">
<link rel="import" href="./asp-icons/asp-icons.html">

<dom-module id="asp-toggle">
	<template>
		<style>
			:host {
				display: block;
				margin: 0px;
			}

			iron-icon {
				--iron-icon-height: 15px;
				--iron-icon-width: 15px;
				color: #505050;
				vertical-align: top;
			}
		</style>
		<iron-icon icon="[[icon]]" on-click="_handleClick"></iron-icon>
	</template>

	<script>
		/**
		 * `asp-toggle` This component toggles between two states.
		 *
		 * @summary ShortDescription.
		 * @customElement
		 * @polymer
		 * @extends {Polymer.Element}
		 */
		class AspToggle extends Polymer.Element {
			/**
			 * String providing the tag name to register the element under.
			 */
			static get is() {
				return 'asp-toggle';
			}

			/**
			 * Object describing property-related metadata used by Polymer features
			 */
			static get properties() {
				return {
					/** This flag determines which of the icons selected/deselected are shown"*/
					isSelected: {
						type: Boolean,
						value: false
					},

					/** 
					* This string contains the icon to be displayed and is computed 
					* based on the isSelected state.
					*/
					icon: {
						type: String,
						computed: '_computeIcon(isSelected, selectedIcon, deselectedIcon)'
					},

					/** The icon to be displayed whenever the toggle is selected. */
					selectedIcon: {
						type: String,
						value: 'aspen:star'
					},

					/** The icon to be displayed whenever the toggle is deselected. */
					deselectedIcon: {
						type: String,
						value: 'aspen:star-border'
					}

				};
			}

			/**
			 * Instance of the element is created/upgraded. Use: initializing state,
			 * set up event listeners, create shadow dom.
			 * @constructor
			 */
			constructor() {
				super();
			}

			/**
			 * Use for one-time configuration of your component after local DOM is initialized. 
			 */
			ready() {
				super.ready();

				Polymer.RenderStatus.afterNextRender(this, function () {

				});
			}

			/**
			 * This method determines which icon will be displayed.
			 * @param isSelected a flag that indicates whether the toggle is selected or not.
			 * @return the icon to be displayed
			 */
			_computeIcon(isSelected, selectedIcon, deselectedIcon) {
				return (isSelected != null && isSelected == true) ? selectedIcon : deselectedIcon;
			}

			/**
			 * This method toggles the icon. 
			 */
			_handleClick() {
				this.isSelected = !this.isSelected;
			}


		}

		window.customElements.define(AspToggle.is, AspToggle);
	</script>
</dom-module>